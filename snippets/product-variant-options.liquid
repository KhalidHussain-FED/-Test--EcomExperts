{%- for value in option.values -%}
  {%- liquid
    assign option_disabled = true
    assign is_color_option = false

    for option1_name in variants_option1_arr
      case option.position
        when 1
          if variants_option1_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
            assign option_disabled = false
          endif
        when 2
          if option1_name == product.selected_or_first_available_variant.option1 and variants_option2_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
            assign option_disabled = false
          endif
        when 3
          if option1_name == product.selected_or_first_available_variant.option1 and variants_option2_arr[forloop.index0] == product.selected_or_first_available_variant.option2 and variants_option3_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
            assign option_disabled = false
          endif
      endcase

      if option.position == 1 and variants_option1_arr[forloop.index0] == 'Color'
        assign is_color_option = true
      endif
    endfor
  -%}

  {%- if is_color_option -%}
    {%- if block.settings.picker_type == 'button' -%}
      <!-- Your button code for color options here -->
    {%- elsif block.settings.picker_type == 'dropdown' -%}
      <!-- Your dropdown code for color options here -->
    {%- endif -%}
  {%- endif -%}
{%- endfor -%}
