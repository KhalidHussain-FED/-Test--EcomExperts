{%- if block.settings.picker_type == 'dropdown' -%}
  <select
    id="{{ section.id }}-{{ option.position }}"
    name="{{ option.name }}"
    form="{{ product_form_id }}"
    onchange="updateSelectedSize(this.value)"
  >
    {%- for value in option.values -%}
      {%- liquid
        assign option_disabled = true

        for option1_name in variants_option1_arr
          case option.position
            when 1
              if variants_option1_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
                assign option_disabled = false
              endif
            when 2
              if option1_name == product.selected_or_first_available_variant.option1 and variants_option2_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
                assign option_disabled = false
              endif
            when 3
              if option1_name == product.selected_or_first_available_variant.option1 and variants_option2_arr[forloop.index0] == product.selected_or_first_available_variant.option2 and variants_option3_arr[forloop.index0] == value and variants_available_arr[forloop.index0]
                assign option_disabled = false
              endif
          endcase
        endfor
      -%}

      <option
        value="{{ value | escape }}"
        {% if option.selected_value == value %}
          selected="selected"
        {% endif %}
        {% if option_disabled %}
          disabled="disabled"
        {% endif %}
      >
        {% if option_disabled -%}
          {{ 'products.product.value_unavailable' | t: option_value: value }}
        {%- else -%}
          {{ value }}
        {%- endif %}
      </option>
    {%- endfor -%}
  </select>
{%- endif -%}
<script>
  function updateSelectedSize(size) {
    var selectedSizeValue = document.getElementById('selectedSizeValue');
    selectedSizeValue.textContent = size;
  }
</script>
